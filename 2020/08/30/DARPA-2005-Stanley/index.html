<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//unpkg.com/@fortawesome/fontawesome-free@5.14.0/css/all.min.css">
  <link rel="stylesheet" href="//unpkg.com/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"riveryoung.cn","root":"/","scheme":"Mist","version":"8.0.0-rc.5","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}};
  </script>

  <meta name="description" content="​    这篇文章主要描述在2005 DARPA 越野挑战赛中获得冠军的无人驾驶车辆Stanley。Stanley是为了能在沙漠中无人干预的情况下高速行驶而开发的。它的软件系统主要依赖于最先进的人工智能技术，比如机器学习和概率推理等。本文主要阐述该架构的主要组成部分，并对越野挑战赛的结果进行讨论。 简介​    越野挑战赛是由美国高级研究计划局DARPA在2003年发起的，以此刺激无人驾驶技术创新">
<meta property="og:type" content="article">
<meta property="og:title" content="在DARPA越野挑战赛获胜的Stanley">
<meta property="og:url" content="http://riveryoung.cn/2020/08/30/DARPA-2005-Stanley/index.html">
<meta property="og:site_name" content="River Young">
<meta property="og:description" content="​    这篇文章主要描述在2005 DARPA 越野挑战赛中获得冠军的无人驾驶车辆Stanley。Stanley是为了能在沙漠中无人干预的情况下高速行驶而开发的。它的软件系统主要依赖于最先进的人工智能技术，比如机器学习和概率推理等。本文主要阐述该架构的主要组成部分，并对越野挑战赛的结果进行讨论。 简介​    越野挑战赛是由美国高级研究计划局DARPA在2003年发起的，以此刺激无人驾驶技术创新">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://riveryoung.cn/2020/08/30/DARPA-2005-Stanley/stanley.png">
<meta property="og:image" content="http://riveryoung.cn/2020/08/30/DARPA-2005-Stanley/stanley-from-the-race.png">
<meta property="og:image" content="http://riveryoung.cn/2020/08/30/DARPA-2005-Stanley/Stanley-from-the-race2.png">
<meta property="og:image" content="http://riveryoung.cn/2020/08/30/DARPA-2005-Stanley/RDDF.png">
<meta property="og:image" content="http://riveryoung.cn/2020/08/30/DARPA-2005-Stanley/stanley-control-center.png">
<meta property="og:image" content="http://riveryoung.cn/2020/08/30/DARPA-2005-Stanley/stanley-roof-rack.png">
<meta property="og:image" content="http://riveryoung.cn/2020/08/30/DARPA-2005-Stanley/stanley-trunk.png">
<meta property="og:image" content="http://riveryoung.cn/2020/08/30/DARPA-2005-Stanley/Flowchart-of-Stanley-software-system.png">
<meta property="og:image" content="http://riveryoung.cn/2020/08/30/DARPA-2005-Stanley/Standard-methodology-of-Stanley">
<meta property="og:image" content="http://riveryoung.cn/2020/08/30/DARPA-2005-Stanley/state-estimation.png">
<meta property="og:image" content="http://riveryoung.cn/2020/08/30/DARPA-2005-Stanley/3d-denoted.png">
<meta property="og:image" content="http://riveryoung.cn/2020/08/30/DARPA-2005-Stanley/scanning-process.png">
<meta property="og:image" content="http://riveryoung.cn/2020/08/30/DARPA-2005-Stanley/grip-map.png">
<meta property="article:published_time" content="2020-08-30T08:35:31.000Z">
<meta property="article:modified_time" content="2020-08-30T16:55:14.469Z">
<meta property="article:author" content="River Young">
<meta property="article:tag" content="自动驾驶">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://riveryoung.cn/2020/08/30/DARPA-2005-Stanley/stanley.png">


<link rel="canonical" href="http://riveryoung.cn/2020/08/30/DARPA-2005-Stanley/">


<script data-pjax class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>在DARPA越野挑战赛获胜的Stanley | River Young</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">River Young</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">爱技术/爱拍照</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
          <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-number">1.</span> <span class="nav-text">简介</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AF%94%E8%B5%9B%E8%A7%84%E5%88%99"><span class="nav-number">1.1.</span> <span class="nav-text">比赛规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%A2%E9%98%9F%E6%88%90%E5%91%98"><span class="nav-number">1.2.</span> <span class="nav-text">团队成员</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%A6%E8%BE%86"><span class="nav-number">2.</span> <span class="nav-text">车辆</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84"><span class="nav-number">3.</span> <span class="nav-text">软件架构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99"><span class="nav-number">3.1.</span> <span class="nav-text">设计原则</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8E%A7%E5%88%B6%E5%92%8C%E6%95%B0%E6%8D%AE%E7%AE%A1%E9%81%93"><span class="nav-number">3.1.1.</span> <span class="nav-text">控制和数据管道</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="nav-number">3.1.2.</span> <span class="nav-text">状态管理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%AF%E9%9D%A0%E6%80%A7"><span class="nav-number">3.1.3.</span> <span class="nav-text">可靠性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E6%94%AF%E6%8C%81"><span class="nav-number">3.1.4.</span> <span class="nav-text">开发支持</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B"><span class="nav-number">3.2.</span> <span class="nav-text">处理流程</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%A6%E8%BE%86%E7%8A%B6%E6%80%81%E8%AF%84%E4%BC%B0"><span class="nav-number">4.</span> <span class="nav-text">车辆状态评估</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%BF%80%E5%85%89%E5%9C%B0%E5%BD%A2%E7%BB%98%E5%88%B6"><span class="nav-number">5.</span> <span class="nav-text">激光地形绘制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%B0%E5%BD%A2%E5%88%86%E7%B1%BB"><span class="nav-number">5.1.</span> <span class="nav-text">地形分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A9%BE%E9%A9%B6%E6%95%B0%E6%8D%AE%E5%8F%82%E6%95%B0%E8%B0%83%E8%AF%95"><span class="nav-number">5.2.</span> <span class="nav-text">驾驶数据参数调试</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89%E5%9C%B0%E5%BD%A2%E5%88%86%E6%9E%90"><span class="nav-number">6.</span> <span class="nav-text">机器视觉地形分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%81%93%E8%B7%AF%E5%B1%9E%E6%80%A7%E8%AF%84%E4%BC%B0"><span class="nav-number">7.</span> <span class="nav-text">道路属性评估</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%81%93%E8%B7%AF%E8%BE%B9%E7%95%8C"><span class="nav-number">7.1.</span> <span class="nav-text">道路边界</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B4%8E%E5%B2%96%E5%9C%B0%E5%BD%A2"><span class="nav-number">7.2.</span> <span class="nav-text">崎岖地形</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92"><span class="nav-number">8.</span> <span class="nav-text">路径规划</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%BA%BF%E5%B9%B3%E6%BB%91"><span class="nav-number">8.1.</span> <span class="nav-text">路线平滑</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E7%BA%BF%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92"><span class="nav-number">8.2.</span> <span class="nav-text">在线路径规划</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E6%97%B6%E6%8E%A7%E5%88%B6"><span class="nav-number">9.</span> <span class="nav-text">实时控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9F%E5%BA%A6%E6%8E%A7%E5%88%B6"><span class="nav-number">9.1.</span> <span class="nav-text">速度控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BD%AC%E5%90%91%E6%8E%A7%E5%88%B6"><span class="nav-number">9.2.</span> <span class="nav-text">转向控制</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E8%BF%9B%E7%A8%8B%E5%92%8C%E6%AF%94%E8%B5%9B%E7%BB%93%E6%9E%9C"><span class="nav-number">10.</span> <span class="nav-text">开发进程和比赛结果</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AF%94%E8%B5%9B%E5%87%86%E5%A4%87"><span class="nav-number">10.1.</span> <span class="nav-text">比赛准备</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%BD%E5%AE%B6%E8%B5%84%E6%A0%BC%E6%AF%94%E8%B5%9B"><span class="nav-number">10.2.</span> <span class="nav-text">国家资格比赛</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AF%94%E8%B5%9B"><span class="nav-number">10.3.</span> <span class="nav-text">比赛</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A8%E8%AE%BA"><span class="nav-number">11.</span> <span class="nav-text">讨论</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%B4%E8%B0%A2"><span class="nav-number">12.</span> <span class="nav-text">致谢</span></a></li></ol></div>
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">River Young</p>
  <div class="site-description" itemprop="description">科技呵护未来</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">5</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/RiverYoung" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;RiverYoung" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/a-he-hen-mang-92" title="zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;a-he-hen-mang-92" rel="noopener" target="_blank"><i class="fab fa-zhihu fa-fw"></i>zhihu</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yangjianghe@hikvision.com" title="E-Mail → mailto:yangjianghe@hikvision.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.linkedin.com/in/%E6%B1%9F%E6%B2%B3-%E6%9D%A8-1b862916b/" title="in → https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;%E6%B1%9F%E6%B2%B3-%E6%9D%A8-1b862916b&#x2F;" rel="noopener" target="_blank"><i class="fa fa-invision fa-fw"></i>in</a>
      </span>
  </div>



      </section>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">
      

      

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://riveryoung.cn/2020/08/30/DARPA-2005-Stanley/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="River Young">
      <meta itemprop="description" content="科技呵护未来">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="River Young">
    </span>

    
    
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          在DARPA越野挑战赛获胜的Stanley
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-30 16:35:31" itemprop="dateCreated datePublished" datetime="2020-08-30T16:35:31+08:00">2020-08-30</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-08-31 00:55:14" itemprop="dateModified" datetime="2020-08-31T00:55:14+08:00">2020-08-31</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%87%AA%E5%8A%A8%E9%A9%BE%E9%A9%B6/" itemprop="url" rel="index"><span itemprop="name">自动驾驶</span></a>
        </span>
    </span>

  
    <span id="/2020/08/30/DARPA-2005-Stanley/" class="post-meta-item leancloud_visitors" data-flag-title="在DARPA越野挑战赛获胜的Stanley" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>​    这篇文章主要描述在2005 DARPA 越野挑战赛中获得冠军的无人驾驶车辆Stanley。Stanley是为了能在沙漠中无人干预的情况下高速行驶而开发的。它的软件系统主要依赖于最先进的人工智能技术，比如机器学习和概率推理等。本文主要阐述该架构的主要组成部分，并对越野挑战赛的结果进行讨论。</p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>​    越野挑战赛是由美国高级研究计划局DARPA在2003年发起的，以此刺激无人驾驶技术创新。比赛的目标是开发出一款能够自行通过未经预演的越野地形的无人驾驶汽车。第一场比赛于2004年3月13日举行，奖金为100万美元。它要求自动驾驶车辆在不超过10小时的时间内完成142英里长的<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E8%8E%AB%E5%93%88%E7%BB%B4%E6%B2%99%E6%BC%A0/8009877?fr=aladdin">莫哈韦沙漠</a>路线。<a id="more"></a>107支队伍注册但只有15支队伍参赛，且所有参赛车辆的行程都没有超过整个路线的5%。这个挑战赛在2005年10月8日再次发起，奖金增加到200万美元。这一次，有195支队伍注册且有23支参赛。其中，有五支队伍完成了比赛。斯坦福大学的“Stanley”以6小时53分钟58秒的成绩领先其他所有车辆完成了比赛，并被宣布为DARPA Grand Challenge的获胜者，如图下图。</p>
<p><img src="/2020/08/30/DARPA-2005-Stanley/stanley.png" alt="1598763421640"></p>
<p>​    </p>
<p>​    本文详细介绍了Stanley及其软件系统。Stanley是由一组研究人员开发的，旨在推进最先进的自动驾驶技术。它的成功是由斯坦福大学领导的，包括来自美国大众汽车公司、Mohr Davidow Ventures、英特尔研究和其他领域的专家共同紧张开发的结果。Stanley基于一辆2004年的大众途锐R5 TDI，配备了英特尔提供的6个处理器计算平台，以及一套用于自动驾驶的传感器和制动器。​</p>
<p>​    开发Stanley的主要技术挑战是建立一个高度可靠的系统，能够在不同的、非结构化的越野环境中以相对较高的速度行驶，并能以高精度完成所有这些工作。正如本文所调查的那样，这些要求导致了自主导航领域的一些进展。在远距离的地形感知、实时避碰和在光滑和崎岖地形上的稳定车辆控制领域，开发新方法并扩展现有的老方法。这些领域的发展很多都是因为速度要求驱动的，因为许多经典的技术在越野领域不适用。在追求这些发展的过程中，研究团队带来了来自不同领域的算法，包括分布式系统、机器学习和概率论。</p>
<h3 id="比赛规则"><a href="#比赛规则" class="headerlink" title="比赛规则"></a>比赛规则</h3><p>​    DARPA的规则很简单。参赛者制作的自动驾驶车辆必须在不到10小时内通过175英里长的沙漠。第一个在10小时内完成比赛的队伍将赢得挑战和200万美元的奖金。绝对不允许人工干预。所有的车辆由DARPA的工作人员启动后就只能自动驾驶。各队只能在起始点观看他们的车辆，如果幸运的话，也能在终点线查看。</p>
<p>​    2004年和2005年的比赛都是在美国西南部的莫哈韦沙漠举行的。道路地形多种多样，既有高质量的土路也有蜿蜒的石头山路；如下图，有小部分的道路是铺好的石子路。2004年的赛程从洛杉矶东北约100英里的加利福尼亚州巴斯托开始，到拉斯维加斯西南约30英里的内华达州普里姆结束。2005年的赛程开始和结束都在内华达州的普里姆。</p>
<p><img src="/2020/08/30/DARPA-2005-Stanley/stanley-from-the-race.png" alt="1598763421640"></p>
<p><img src="/2020/08/30/DARPA-2005-Stanley/Stanley-from-the-race2.png" alt="1598764202860"></p>
<p>​    在比赛前的2h内，赛道信息对所有的参赛队伍是保密的。之后，每个队伍都会收到一张CD-ROM，其中含有按照DARPA定义的数据格式存储的道路信息。该信息包含定义赛道边界的经度，维度和宽度的列表以及相关速度限制的列表。下图就是其中的一个数据段。如果车辆大幅度的开出道路的边界，则会有被取消资格的风险。在2005年的比赛中，跑到信息中含有2935个导航点。</p>
<p><img src="/2020/08/30/DARPA-2005-Stanley/RDDF.png" alt="1598771128518"></p>
<p>​    赛道的宽度与正常道路的宽度一致，在2005年的比赛中，一般在3到30米之间。限速是为了保护赛道上重要的基础设施和生态环境，也为了确保跟踪在每个自动驾驶车辆后面的DARPA司机的安全。车速限制在每小时5英里到50英里之间。道路信息定义了机器人将采取的近似路径，因此不需要进行全局路径规划。因此，这场比赛主要是在沙漠地形上进行高速道路检测、障碍物检测和避障的测试。</p>
<p>​    所有的车辆都在同一赛道上比赛，每隔5分钟一个接一个地出发。当速度更快的车辆超过了速度较慢的车辆时，DARPA工作人员会让速度较慢的车辆暂停，让第二个车辆像躲避静态障碍物一样超过第一个车辆。这就消除了车辆处理动态超车的需求。</p>
<h3 id="团队成员"><a href="#团队成员" class="headerlink" title="团队成员"></a>团队成员</h3><p>​    斯坦福赛车队是由四个主要小组组成的。车辆组负责监督与核心车辆相关的所有修改和部件开发。这包括线控系统、传感器和计算机挂载以及计算机系统。该小组由美国大众电子研究实验室的研究人员主导；软件组开发所有的软件，包括导航软件和各种健康监测和安全系统。软件小组由斯坦福大学的研究人员主导；测试组负责根据指定的测试时间表，测试所有系统组件和整机系统。该组的成员由其他组的成员中分离出来的。测试小组由斯坦福大学的研究人员主导；宣传小组负责管理斯坦福赛车队的所有媒体关系和资金筹集活动。该宣传小组由莫尔•达维多风险投资公司的员工主导，其他所有赞助商也参与其中。执行监督由一个包括所有主要支持者的指导委员会提供。</p>
<h2 id="车辆"><a href="#车辆" class="headerlink" title="车辆"></a>车辆</h2><p>​    Stanley是基于柴油动力的大众途锐R5。途锐已经配备了四轮驱动，可变高度空气悬架和自动电子锁差速器。为了保护车辆免受伤害，Stanley还配备了防滑板和加强前保险杠。除此之外，还有可以直接电子驱动的油门和刹车的接口；附在转向柱上提供电子转向控制的直流电机；连接在变速杆上的线性制动器，用于切换车辆的前进挡，倒车档和泊车档（如下图）；车辆数据，比如各个车轮的速度和转向角度，被自动感知并通过CAN总线接口和计算机系统通信。</p>
<p><img src="/2020/08/30/DARPA-2005-Stanley/stanley-control-center.png" alt="1598770672704"></p>
<p>​    </p>
<p>​    汽车的定制的车顶行李架如下图所示。它装着Stanley几乎所有的传感器。车顶为车辆提供了最高的有利位置;从这一点上，地形的可见性是最好的并且访问全球定位系统GPS 的信号阻塞最小。对于环境感知，车顶行李架装了5个德国SICK的激光测距仪。激光沿着车辆的驾驶方向向前指向，但倾斜角度略有不同。激光测量在车辆前面25米的不同范围的近似地形的横截面。车顶架还持有一个彩色相机，用于远距离道路感知，这是指向向前和角度略有向下。对于远距离探测大障碍物，Stanley的车顶行李架还装有两个由Smart Microwave Sensors提供的24GHz雷达传感器。两个雷达传感器覆盖区可达200米，覆盖角度在方位角约为20度。该系统的两个天线安装在激光传感器阵列的两侧。激光、相机和雷达系统组成了系统的环境传感器组。也就是说，它们把前面的地形告诉了Stanley，这样Stanley就可以决定以什么速度往哪里行驶。</p>
<p><img src="/2020/08/30/DARPA-2005-Stanley/stanley-roof-rack.png" alt="1598771239338"></p>
<p>​    再往后，车顶支架上有许多额外的天线：一个用于Stanley的GPS定位系统，两个用于GPS指南。GPS定位单元是一个L1/L2/Omnistar HP接收器。GPS系统和车载惯性测量单元IMU共同组成定位传感器组，其主要功能是来估计车辆相对于外部坐标系统的位置和速度。</p>
<p>​    最后，一个无线电天线和三个额外的GPS天线来自DARPA的E-Stop系统也安装在车顶行李架上。E-Stop系统是一种无线连接，可以让尾随Stanley的车辆在紧急情况下对Stanley安全停车。车顶架上还装有一个信号喇叭、一个警示灯和两个手动E-stop按钮。</p>
<p>​    Stanley的计算机系统位于汽车的后备箱，如下图。特殊的风管引导空气从车辆的空调系统进入后备箱进行冷却。后备箱的特点是装有一个耐用的机架，它携带六台奔腾M计算机阵列，一个千兆以太网交换机，以及各种与物理传感器和途锐制动器相连的设备。它还具有一个定制的电力系统和备用电池，以及一个开关盒，使Stanley能够通过软件对单个系统组件进行电力循环。DARPA提供的E-Stop也位于这个机架上。后备箱总成还拥有大众途锐制动器的定制接口:刹车、油门、变速杆和转向控制器。一个六自由度的IMU被固定在后备箱的计算架下面的车架上。</p>
<p><img src="/2020/08/30/DARPA-2005-Stanley/stanley-trunk.png" alt="1598773021457"></p>
<p>​    新增仪器的总功率需求约为500瓦，通过途锐的备用交流发电机提供。斯坦利的备用电池系统提供了一个额外的缓冲，以适应在沙漠高温下的长时间运转。</p>
<p>​    所有计算机上运行的操作系统都是Linux。之所以选择Linux，是因为它具有出色的联网和分时功能。在比赛期间，斯坦利在六台电脑中的三台上执行了比赛软件；第四个是用于记录比赛数据，还有两台电脑是闲置。三台运行比赛软件的电脑中的一台完全用于视频处理，而另外两台则执行所有其他软件。这些计算机能够以高达100hz的频率询问传感器，并以高达20hz的频率控制转向、油门和刹车。</p>
<p>​    Stanley的设计中一个重要的方面是保持上街的合法性，这样驾驶员就可以像操作普通的轿车一样安全地操作无人驾驶车辆。Stanley的定制用户接口使驾驶员可以随意使用和脱离计算机系统，甚至在车辆行驶的时候。因此，驾驶员可以在开发的任何时候禁用计算机控制，重新获得对车辆的手动控制。为此，Stanley配备了几个位于驾驶座附近的手动控制按钮。每一个开关控制着刹车，油门和转向这三大制动器之一。一个额外的中央紧急开关解除了所有计算机控制，使自动驾驶车辆变成了一辆传统的汽车。虽然这个特性跟实际比赛是没有相关性的，实际比赛中没有人会坐在车里，但这被证明在软件开发过程是大大有益的。这个接口可以让人在里面自主操作Stanley，因为一个专门的安全司机可以随时捕捉电脑故障，并承担完全的手动控制。</p>
<p>​    在真正的比赛中，车辆里当然没有驾驶员，所有的驾驶决定都是由Stanley的电脑做出的。Stanley拥有一个操作控制界面，通过操控台上的触摸屏实现。该界面允许比赛工作人员在必要时关闭和重新启动车辆。</p>
<h2 id="软件架构"><a href="#软件架构" class="headerlink" title="软件架构"></a>软件架构</h2><h3 id="设计原则"><a href="#设计原则" class="headerlink" title="设计原则"></a>设计原则</h3><p>​    在2004年和2005年的大挑战之前，DARPA向参赛者透露，一辆四轮驱动小货车在理论上是能跑完全程的。这些公告表明，成功完成挑战所必需的创新将是设计智能驾驶软件，而不是设计新奇的汽车。这一声明和2004年比赛中顶尖选手的表现指导了斯坦福赛车队的设计理念：将自动导航视为一个软件问题。</p>
<p>​    基于之前在机器人架构的工作，Stanley的软件架构是采用著名的三层体系结构。尽管没有一个长期的象征性的规划方法，在软件体系结构的设计中，许多指导原则被证明是必不可少的。</p>
<h4 id="控制和数据管道"><a href="#控制和数据管道" class="headerlink" title="控制和数据管道"></a>控制和数据管道</h4><p>​    在Stanley的软件系统中没有集中式的主进程。所有模块都以自己的速度执行，没有进程间同步机制。相反，所有数据都带有全局时间戳，并且在集成多个数据源时使用时间戳。这种方法减少了死锁和不必要的处理延迟的风险。为了最大化系统的可配置性，几乎所有的进程间通信都是通过发布-订阅机制实现的。从传感器到执行器的信息以单一方向流动;同一模块接收的信息不会超过一次。在任何时间点，管道中的所有模块都在模拟地工作，从而最大限度地提高信息吞吐量，最大限度地减少软件系统的延迟。</p>
<h4 id="状态管理"><a href="#状态管理" class="headerlink" title="状态管理"></a>状态管理</h4><p>​    尽管软件是分布式的，但系统的状态是由各局部变量维护的。系统中有许多状态变量。健康状态在运行状况监视器中本地管理；参数状态在参数服务器中管理；全局运行模式保持在有限状态自动机中；在状态估计器模块中对车辆状态进行估计。环境状态分解为多个映射（激光，相机和雷达）。每个映射都在专用模块中维护。因此，所有其他模块将接收相互一致的值。确切的状态变量将在本文后面的部分进行讨论。所有状态变量通过发布-订阅机制传播到软件系统的相关模块。</p>
<h4 id="可靠性"><a href="#可靠性" class="headerlink" title="可靠性"></a>可靠性</h4><p>​    该软件强调自动系统的整体可靠性。有专门的模块用来监视各个软件和硬件组件的运行状况，并且在观察到故障时自动重新启动这些组件。通过这种方式，软件在某些情况下是健壮的。比如软件模块崩溃或者挂起或者传感器失效等。</p>
<h4 id="开发支持"><a href="#开发支持" class="headerlink" title="开发支持"></a>开发支持</h4><p>​    最后，软件系统是被结构化的，以助于系统的开发和调试。开发人员可以简单的运行软件的一个子系统并轻松的跨不同的处理器迁移模块。为了便于开发过程中的调试，所有数据都被记录下来。通过使用专门的回放模块，软件可以在记录的数据上运行。开发了许多可视化工具，使得在车辆运行或回放以前记录的数据时检查数据和内部变量成为可能。开发过程使用了一个版本控制过程，该过程带有一套严格的竞赛质量软件发布规则。总的来说，我们发现软件在开发期间的灵活性对于实现长期自动驾驶所必需的高可靠性是至关重要的。</p>
<h3 id="处理流程"><a href="#处理流程" class="headerlink" title="处理流程"></a>处理流程</h3><p>​    比赛软件由大约30个模块并行运行，如下图。该系统分为六层，分别对应以下功能：传感器接口、感知、控制、车辆接口、用户界面和全局服务。</p>
<ol>
<li><strong>传感器接口层</strong>包括若干软件模块，用于接收所有传感器数据并对其进行时间戳。该层从每个激光传感器接收75赫兹的数据，从摄像头接收大约12赫兹的数据，从GPS和GPS指南接收10赫兹的数据，IMU和途锐CAN总线接收100赫兹的数据。这一层还包含一个数据库服务用于处理赛道坐标RDDF文件。</li>
<li><strong>感知层</strong>将传感器数据映射到内部模块中。这一层的主要模块是无迹卡尔曼滤波UKF车辆状态评估模块，确定了汽车的坐标，方向和速度。基于激光、相机和雷达系统的三个不同的地图模块构建二维2D环境地图。道路探测系统使用激光衍生的地图来寻找道路的边界，这样车辆就可以让自己一直处于道路中央。最后，路面评估模块提取当前路面的参数，以确定安全车辆速度。</li>
<li><strong>控制层</strong>负责调整车辆的转向、油门和刹车。其中关键模块是路径规划器，它确定车辆在转向空间和速度空间的轨迹。该轨迹被传递给两个闭环轨迹跟踪控制器，一个用于转向控制，另一个用于刹车和油门控制。两个控制器都向执行器发送低级指令，执行器忠实地执行由规划器发出的轨迹。控制层还具有顶层控制模块，实现为一个简单的有限状态自动机。该级别可以响应通过车内触摸屏或无线E-stop接收到的用户命令决定通用车辆模式，并在需要倒车时保持齿轮状态。</li>
<li><strong>车辆接口层</strong>作为自动驾驶车辆的线控系统的接口。它包含了车辆的刹车、油门和方向盘的所有接口。它还具有用于调节许多系统组件的物理功率的电源服务管理接口。</li>
<li><strong>用户界面层</strong>包括远程E-stop和用于启动软件的触摸屏模块。</li>
<li><strong>全局服务层</strong>为所有软件模块提供许多基本服务。命名和通信服务是由卡内基梅隆大学提供的进程间通信工具包实现的。一个集中的参数服务器维护一个所有车辆参数的数据库，并以一样的方式更新它们。各个系统组件的电源功率是由电源服务器管理的。另一个模块监视所有系统组件的运行状况，并在必要时重新启动指定的系统组件。时钟同步是通过时间服务器实现的。最后，数据日志服务器将传感器、控制和诊断数据转储到磁盘，以便回放和分析。</li>
</ol>
<p><img src="/2020/08/30/DARPA-2005-Stanley/Flowchart-of-Stanley-software-system.png" alt="Flowchart-of-Stanley-software-system"></p>
<p>​    下面的章节将更详细地描述Stanley的核心软件过程。文章最后将总结Stanley在越野挑战赛中的表现。</p>
<h2 id="车辆状态评估"><a href="#车辆状态评估" class="headerlink" title="车辆状态评估"></a>车辆状态评估</h2><p>​    车辆状态估计是实现高精度驾驶的关键前提。不准确的姿态估计会导致车辆开出赛道，或者生成的地形图不能反映车辆的环境状态，导致糟糕的驾驶决策。在Stanley中，车辆状态总共包含15个变量。这些参数空间的设计遵循标准方法论（Farrell &amp; Barth, 1999; van der Merwe &amp; Wan, 2004），如下表所示。</p>
<p><img src="/2020/08/30/DARPA-2005-Stanley/Standard-methodology-of-Stanley's-15-variables.png" alt="Standard-methodology-of-Stanley&#39;s-15-variables"></p>
<p>​    无迹卡尔曼滤波（UKF）以100Hz的频率更新这些变量。UKF整合了GPS、GPS指南、IMU和车轮编码器的观测结果。GPS系统提供绝对位置和速度测量，这两者都纳入UKF。从数学的角度来看,σ点线性化的UKF产生的估计误差往往低于线性化的基于扩展卡尔曼滤波的泰勒展开式EKF。对许多人来说，从实现的立场看，UKF也是更加可取的，因为它不需要任何雅可比矩阵的显式计算。尽管这些对进一步分析是有用的。</p>
<p>​    当GPS可用时，UKF只使用了“Weak”模式。这个模型对应于一个移动的质量，它可以向任何方向移动。因此，在正常工作模式下，UKF对相对于车辆方向的速度矢量方向不施加约束。这样的模型显然是不准确的，但是在光滑的沙漠地形中，车辆与地面的相互作用通常很难建模。移动质量模型允许可能发生在越野驾驶中的任何打滑或侧滑。</p>
<p>​    然而，该模型在GPS中断时表现不佳，因为车辆的位置强烈依赖IMU加速计的精度。因此，在GPS中断期间使用了更严格的UKF运动模型。该模型约束车辆只沿其指向的方向运动。集成IMU的陀螺仪的方向和车轮的速度计算位置，能够在GPS中断的2分钟内保持准确的姿态。累积误差通常以厘米为单位。Stanley的运行状况监视器将降低GPS故障期间的最大车速至每小时10英里，以最大限度地提高受限制车辆模型的准确性。在GPS中断使用Weak车辆模型的位置评估结果如下图a，而图b使用的强车辆模型的评估结果。这个实验说明了该滤波器在GPS中断时的性能。显然，GPS故障期间精确的车辆建模是至关重要的。在一条铺好的道路上进行的实验中，我们发现即使在没有GPS的情况下循环行驶1.3公里，车辆累积误差也只有1.7米。</p>
<p><img src="/2020/08/30/DARPA-2005-Stanley/state-estimation.png" alt="1598804183605"></p>
<h2 id="激光地形绘制"><a href="#激光地形绘制" class="headerlink" title="激光地形绘制"></a>激光地形绘制</h2><h3 id="地形分类"><a href="#地形分类" class="headerlink" title="地形分类"></a>地形分类</h3><p>​    为了安全地避开障碍物，Stanley必须能够在足够的范围内准确地探测到不可行驶的地形，以便停止或采取适当的规避动作。车辆移动得越快，就必须检测到越远的障碍物。激光被用作Stanley短距离和中距离避障的基础。Stanley车顶装有5台单扫描激光测距仪，倾斜向下扫描前方道路。扫描过程如下图a。每次激光扫描产生一个大小为181的向量，间隔0.5度。将这些扫描投影到全局坐标系中，根据车辆的估计姿态，得到每个激光的三维点云。图b则显示了多个不同的传感器所获取的三维点云的例子。这种3D点的坐标表示为<img src="/2020/08/30/DARPA-2005-Stanley/3d-denoted.png" alt="1598805144874"></p>
<p><img src="/2020/08/30/DARPA-2005-Stanley/scanning-process.png" alt="1598804966776"></p>
<p>​    激光点云上的障碍物检测可以被描述为一个分类问题，在一个表面网格中为每个二维位置分配三个可能的值:已占用、自由和未知。如果我们可以找到两个邻近点的垂直距离超过关键的垂直距离，可以认为该位置是一个障碍。如果没有发现这样的点，则可以认为是可以正常通行的障碍，但至少有一个读数分为相应的网格单元。如果没有读入单元格，则认为该单元格的可驾驶性是未知的。对附近点的搜索被方便地组织在一个2D网格中，与提供给车辆导航引擎的最终驾驶能力地图使用的网格相同。下图就是网格图的例子，如图所示，地图将地形分为三类:可驾驶、已占用或未知。</p>
<p><img src="/2020/08/30/DARPA-2005-Stanley/grip-map.png" alt="1598805767993"></p>
<h3 id="驾驶数据参数调试"><a href="#驾驶数据参数调试" class="headerlink" title="驾驶数据参数调试"></a>驾驶数据参数调试</h3><h2 id="机器视觉地形分析"><a href="#机器视觉地形分析" class="headerlink" title="机器视觉地形分析"></a>机器视觉地形分析</h2><h2 id="道路属性评估"><a href="#道路属性评估" class="headerlink" title="道路属性评估"></a>道路属性评估</h2><h3 id="道路边界"><a href="#道路边界" class="headerlink" title="道路边界"></a>道路边界</h3><h3 id="崎岖地形"><a href="#崎岖地形" class="headerlink" title="崎岖地形"></a>崎岖地形</h3><h2 id="路径规划"><a href="#路径规划" class="headerlink" title="路径规划"></a>路径规划</h2><h3 id="路线平滑"><a href="#路线平滑" class="headerlink" title="路线平滑"></a>路线平滑</h3><h3 id="在线路径规划"><a href="#在线路径规划" class="headerlink" title="在线路径规划"></a>在线路径规划</h3><h2 id="实时控制"><a href="#实时控制" class="headerlink" title="实时控制"></a>实时控制</h2><h3 id="速度控制"><a href="#速度控制" class="headerlink" title="速度控制"></a>速度控制</h3><h3 id="转向控制"><a href="#转向控制" class="headerlink" title="转向控制"></a>转向控制</h3><h2 id="开发进程和比赛结果"><a href="#开发进程和比赛结果" class="headerlink" title="开发进程和比赛结果"></a>开发进程和比赛结果</h2><h3 id="比赛准备"><a href="#比赛准备" class="headerlink" title="比赛准备"></a>比赛准备</h3><h3 id="国家资格比赛"><a href="#国家资格比赛" class="headerlink" title="国家资格比赛"></a>国家资格比赛</h3><h3 id="比赛"><a href="#比赛" class="headerlink" title="比赛"></a>比赛</h3><h2 id="讨论"><a href="#讨论" class="headerlink" title="讨论"></a>讨论</h2><h2 id="致谢"><a href="#致谢" class="headerlink" title="致谢"></a>致谢</h2><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/av200073789/">DARPA Grand Challenge 美国无人驾驶挑战赛 全程记录</a></p>
<p><a target="_blank" rel="noopener" href="http://isl.ecst.csuchico.edu/DOCS/darpa2005/DARPA%202005%20Stanley.pdf">Stanley: The robot that won the DARPA Grand Challenge</a></p>
<p>主要作者Sebastian Thrun，人工智能及自动驾驶领域真正的牛人，2005年带队参加DARPA挑战赛就一举获得冠军，之后曾入职Google和自动驾驶部门，还创建了Udacity。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E8%87%AA%E5%8A%A8%E9%A9%BE%E9%A9%B6/" rel="tag"># 自动驾驶</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/08/28/%E8%BF%81%E7%A7%BBHexo%E5%8D%9A%E5%AE%A2%E8%87%B3%E8%85%BE%E8%AE%AF%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/" rel="prev" title="迁移Hexo博客至腾讯云服务器">
                  <i class="fa fa-chevron-left"></i> 迁移Hexo博客至腾讯云服务器
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
  
  
  



      

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">River Young</span>
</div>

    </div>
  </footer>

  
  <script src="//unpkg.com/animejs@3.2.0/lib/anime.min.js"></script>
  <script src="/true"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>
  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '.page-configurations',
    '.main-inner',
    '.post-toc-wrap',
    '.languages',
    '.pjax'
  ],
  analytics: false,
  cacheBust: false,
  scrollRestoration: false,
  scrollTo: !CONFIG.bookmark.enable
});

document.addEventListener('pjax:success', () => {
  pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  const hasTOC = document.querySelector('.post-toc');
  document.querySelector('.sidebar-inner').classList.toggle('sidebar-nav-active', hasTOC);
  document.querySelector(hasTOC ? '.sidebar-nav-toc' : '.sidebar-nav-overview').click();
  NexT.utils.updateSidebarPosition();
});
</script>


  















  








    <div class="pjax">
  

  

    </div>
</body>
</html>
